function setBaseUrl(e,n){return n.substring(0,n.indexOf("#")-1)}var dnbhub=angular.module("dnbhub",["ngRoute","ngSanitize","dnbhubControllers","dnbhubDirectives","dnbhubServices"]);dnbhub.config(["$routeProvider",function(e){e.when("/index",{templateUrl:"app/views/index.html",controller:"indexCtrl"}).when("/blog",{templateUrl:"app/views/blog.html",controller:"blogCtrl",reloadOnSearch:!1}).when("/singles",{templateUrl:"app/views/singles.html",controller:"singlesCtrl"}).when("/freedownloads",{templateUrl:"app/views/freedownloads.html",controller:"freeDownloadsCtrl"}).when("/reposts",{templateUrl:"app/views/reposts.html",controller:"repostsCtrl"}).when("/contact",{templateUrl:"app/views/contact.html",controller:"contactCtrl"}).when("/about",{templateUrl:"app/views/about.html",controller:"aboutCtrl"}).otherwise({redirectTo:"/index"})}]);var dnbhubControllers=angular.module("dnbhubControllers",["angularSpinner"]);dnbhubControllers.config(["usSpinnerConfigProvider",function(e){e.setDefaults({lines:13,length:28,width:14,radius:42,scale:1,corners:1,color:"#fff",opacity:.25,rotate:0,direction:1,speed:1,trail:60,fps:20,zIndex:2e9,className:"spinner",top:"50vh",left:"50%",shadow:!0,hwaccel:!1,position:"fixed"})}]),dnbhubControllers.controller("navCtrl",["$scope","$document","$element","$location","usSpinnerService",function(e,n,o,t,s){"use strict";e.title="Drum and Bass Hub",e.buttonTitles={index:"Index - Drum and Bass Hub index",singles:"Singles - Soundcloud powered production showcase; all downloadable sounds are free for personal use and/or promotional purposes only",freedownloads:"Free Downloads - Hive and Soundcloud powered section featuring freely downloadable music, produced by Dnbhub in-house artists",reposts:"Featured - Soundcloud powered RePosts playlists, featuring drum and bass producers, DJs, and MCs audio compositions",blog:"Blog - Drum and Bass related press releases",contact:"Contact form - use it for any enquires correlating with Drum and Bass Hub activities",about:"All trademarks and copyrights are property of their respective owners"},e.buttonGlyphicons={index:"glyphicon glyphicon-fire",singles:"glyphicon glyphicon-music",freedownloads:"glyphicon glyphicon-cloud-download",reposts:"glyphicon glyphicon-retweet",blog:"glyphicon glyphicon-th-large",contact:"glyphicon glyphicon-envelope",about:"glyphicon glyphicon-copyright-mark"},e.currentYear=(new Date).getFullYear(),e.buttonNames={index:"Index",singles:"Singles",freedownloads:"Free Downloads",reposts:"Featured",blog:"Blog",contact:"Contact",about:"VS 2011-"+e.currentYear},e.buttonHrefs={index:"#!/index",singles:"#!/singles",freedownloads:"#!/freedownloads",reposts:"#!/reposts",blog:"#!/blog",contact:"#!/contact",about:"#!/about"},e.sounds=["../sounds/blip.mp3"],e.speakerObj=null,e.navButtons=[],e.$watch(function(){return t.path()},function(n,o){if(e.navButtons.length>0)for(var t=0;t<e.navButtons.length;t++)e.navButtons[t].innerHTML.indexOf(o)!==-1&&e.navButtons[t].setAttribute("class","nav-tabs"),e.navButtons[t].innerHTML.indexOf(n)!==-1&&e.navButtons[t].setAttribute("class","nav-tabs active")}),e.playSound=function(){e.speakerObj.setAttribute("src",e.sounds[0]),e.speakerObj.setAttribute("autoplay","autoplay"),e.speakerObj.addEventListener("load",function(){e.speakerObj.play()},!0)},n.ready(function(){if(console.log("document ready"),s.spin("root-spinner"),e.speakerObj=o[0].children[0],e.navButtons=o[0].children[1].querySelector("#tabs").querySelectorAll("li"),e.navButtons.length>0)for(var n=0;n<e.navButtons.length;n++)e.navButtons[n].innerHTML.indexOf(t.path())!==-1&&e.navButtons[n].setAttribute("class","nav-tabs active")})}]),dnbhubControllers.controller("indexCtrl",["$scope","$route","usSpinnerService",function(e,n,o){"use strict";e.getTracks=function(e){SC.initialize({client_id:"dc01ec1b4ea7d41793e61bac1dae13c5"});var n="",o='<br/><iframe id="player_progress" name="player" src=""></iframe><br/><div id="header"><div></div><span id="stream_url"><span class="glyphicon glyphicon-play" aria-hidden="true"></span></span><span id="download_url"><span class="glyphicon glyphicon-save" aria-hidden="true"></span></span><span id="playback_count">plays</span><span id="favoritings_count">favoritings</span></div>';SC.get("http://api.soundcloud.com/users/1275637/tracks.json?client_id=dc01ec1b4ea7d41793e61bac1dae13c5",function(t){for(var s=0;s<t.length;s++)n=t[s].downloadable===!0?"all-rights-reserved"===t[s].license?'<div id="line"><div id="title">'+t[s].title+'</div><div id="genre" class="right">'+t[s].genre+'</div><span id="stream_url"><a href="'+t[s].stream_url+'?client_id=dc01ec1b4ea7d41793e61bac1dae13c5" target="player"><span class="glyphicon glyphicon-play" aria-hidden="true"></span></a></span><span id="download_url"><a href="'+t[s].download_url+'?client_id=dc01ec1b4ea7d41793e61bac1dae13c5" target=_blank><span class="glyphicon glyphicon-save" aria-hidden="true"></span></a></span><span id="playback_count">'+t[s].playback_count+'</span><span id="favoritings_count">'+t[s].favoritings_count+"</span></div>":'<div id="line"><div id="title">'+t[s].title+'</div><div id="genre" class="right">'+t[s].genre+'</div><span id="stream_url"><a href="'+t[s].stream_url+'?client_id=dc01ec1b4ea7d41793e61bac1dae13c5" target="player"><span class="glyphicon glyphicon-play" aria-hidden="true"></span></a></span><span id="download_url"><a href="'+t[s].download_url+'?client_id=dc01ec1b4ea7d41793e61bac1dae13c5" target=_blank><span class="glyphicon glyphicon-save" aria-hidden="true"></span></a></span><span id="playback_count">'+t[s].playback_count+'</span><span id="favoritings_count">'+t[s].favoritings_count+"</span></div>":null!==t[s].purchase_url?'<div id="line"><div id="title">'+t[s].title+'</div><div id="genre" class="right">'+t[s].genre+'</div><span id="stream_url"><a href="'+t[s].stream_url+'?client_id=dc01ec1b4ea7d41793e61bac1dae13c5" target="player"><span class="glyphicon glyphicon-play" aria-hidden="true"></span></a></span><span id="download_url"><a href="'+t[s].purchase_url+'" target=_blank><span class="glyphicon glyphicon-save" aria-hidden="true"></span></a></span><span id="playback_count">'+t[s].playback_count+'</span><span id="favoritings_count">'+t[s].favoritings_count+"</span></div>":'<div id="line"><div id="title">'+t[s].title+'</div><div id="genre">'+t[s].genre+'</div><span id="stream_url"><a href="'+t[s].stream_url+'?client_id=dc01ec1b4ea7d41793e61bac1dae13c5" target="player"><span class="glyphicon glyphicon-play" aria-hidden="true"></span></a></span><span id="download_url"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></span><span id="playback_count">'+t[s].playback_count+'</span><span id="favoritings_count">'+t[s].favoritings_count+"</span></div>",o=o.concat(n);o=o.concat("</span>"),document.getElementById("sc_player").innerHTML=o,e()})},e.adaptInternalsOnLoad=function(){$("#sc_player").height($("html").height()-190)},e.$on("$viewContentLoaded",function(){console.log("index view controller loaded"),e.getTracks(function(){e.adaptInternalsOnLoad(),o.stop("root-spinner")})}),e.$on("$destroy",function(){console.log("index view controller destroyed"),o.spin("root-spinner")}),window.addEventListener("resize",function(){e.$apply(function(){n.reload()})},!0)}]),dnbhubControllers.controller("singlesCtrl",["$scope","usSpinnerService",function(e,n){"use strict";e.$on("$viewContentLoaded",function(){console.log("singles view controller loaded"),n.stop("root-spinner")}),e.$on("$destroy",function(){console.log("singles view controller destroyed"),n.spin("root-spinner")})}]),dnbhubControllers.controller("freeDownloadsCtrl",["$scope","$sce","usSpinnerService","freedownloadsService",function(e,n,o,t){"use strict";e.freedownloadsData=[],e.selectedIframeLink="",e.returnSelectedIframeLink=function(){return n.trustAsResourceUrl(e.selectedIframeLink)},e.updateFreedownloadsData=function(){t.query({}).$promise.then(function(n){e.freedownloadsData=[],n.forEach(function(n){e.freedownloadsData.push(n)}),e.selectedIframeLink=e.freedownloadsData[0].iframeLink,o.stop("root-spinner")})},e.loadIframeUrl=function(n){console.log(n.currentTarget.id),e.selectedIframeLink!==e.freedownloadsData[n.currentTarget.id].iframeLink&&(e.selectedIframeLink=e.freedownloadsData[n.currentTarget.id].iframeLink)},e.$on("$viewContentLoaded",function(){console.log("free downloads view controller loaded"),e.updateFreedownloadsData()}),e.$on("$destroy",function(){console.log("free downloads view controller destroyed"),o.spin("root-spinner")})}]),dnbhubControllers.controller("repostsCtrl",["$scope","usSpinnerService",function(e,n){"use strict";e.$on("$viewContentLoaded",function(){console.log("reposts view controller loaded"),n.stop("root-spinner")}),e.$on("$destroy",function(){console.log("reposts view controller destroyed"),n.spin("root-spinner")})}]),dnbhubControllers.controller("blogCtrl",["$scope","$sce","$route","$location","usSpinnerService","blogPostsService",function(e,n,o,t,s,a){"use strict";e.inputReleaseCode=void 0,e.blogPosts=[],e.selectedBlogPostId=0,e.selectedBlogPost={},e.returnWidgetLink=function(){return n.trustAsResourceUrl(e.selectedBlogPost.widgetLink)},e.getTracks=function(e,n){SC.initialize({client_id:"dc01ec1b4ea7d41793e61bac1dae13c5"});var o="",t='<br/><iframe id="player_progress" name="player" src=""></iframe><br/><div id="header"><div></div><span id="stream_url"><span class="glyphicon glyphicon-play" aria-hidden="true"></span></span><span id="download_url"><span class="glyphicon glyphicon-save" aria-hidden="true"></span></span><span id="playback_count">plays</span><span id="favoritings_count">favoritings</span></div>';SC.get("http://api.soundcloud.com/users/"+e+"/tracks.json?client_id=dc01ec1b4ea7d41793e61bac1dae13c5",function(e){for(var s=0;s<e.length;s++)o=e[s].downloadable===!0?"all-rights-reserved"===e[s].license?'<div id="line"><div id="title">'+e[s].title+'</div><div id="genre" class="right">'+e[s].genre+'</div><span id="stream_url"><a href="'+e[s].stream_url+'?client_id=dc01ec1b4ea7d41793e61bac1dae13c5" target="player"><span class="glyphicon glyphicon-play" aria-hidden="true"></span></a></span><span id="download_url"><a href="'+e[s].download_url+'?client_id=dc01ec1b4ea7d41793e61bac1dae13c5" target=_blank><span class="glyphicon glyphicon-save" aria-hidden="true"></span></a></span><span id="playback_count">'+e[s].playback_count+'</span><span id="favoritings_count">'+e[s].favoritings_count+"</span></div>":'<div id="line"><div id="title">'+e[s].title+'</div><div id="genre" class="right">'+e[s].genre+'</div><span id="stream_url"><a href="'+e[s].stream_url+'?client_id=dc01ec1b4ea7d41793e61bac1dae13c5" target="player"><span class="glyphicon glyphicon-play" aria-hidden="true"></span></a></span><span id="download_url"><a href="'+e[s].download_url+'?client_id=dc01ec1b4ea7d41793e61bac1dae13c5" target=_blank><span class="glyphicon glyphicon-save" aria-hidden="true"></span></a></span><span id="playback_count">'+e[s].playback_count+'</span><span id="favoritings_count">'+e[s].favoritings_count+"</span></div>":null!==e[s].purchase_url?'<div id="line"><div id="title">'+e[s].title+'</div><div id="genre" class="right">'+e[s].genre+'</div><span id="stream_url"><a href="'+e[s].stream_url+'?client_id=dc01ec1b4ea7d41793e61bac1dae13c5" target="player"><span class="glyphicon glyphicon-play" aria-hidden="true"></span></a></span><span id="download_url"><a href="'+e[s].purchase_url+'" target=_blank><span class="glyphicon glyphicon-save" aria-hidden="true"></span></a></span><span id="playback_count">'+e[s].playback_count+'</span><span id="favoritings_count">'+e[s].favoritings_count+"</span></div>":'<div id="line"><div id="title">'+e[s].title+'</div><div id="genre">'+e[s].genre+'</div><span id="stream_url"><a href="'+e[s].stream_url+'?client_id=dc01ec1b4ea7d41793e61bac1dae13c5" target="player"><span class="glyphicon glyphicon-play" aria-hidden="true"></span></a></span><span id="download_url"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></span><span id="playback_count">'+e[s].playback_count+'</span><span id="favoritings_count">'+e[s].favoritings_count+"</span></div>",t=t.concat(o);t=t.concat("</span>"),document.getElementById("sc_player").innerHTML=t,n()})},e.adaptInternalsOnLoad=function(){var e=$("nav").height(),n=$("html").height(),o=$(".post .heading").height()+$(".post .heading").css("margin-top")+$(".post .heading").css("margin-bottom"),t=n-e-o;$(".post .text").height(t),$(".post .widget").height(t),$("#sc_player").height(n-190)},e.setProperSearchParam=function(){var n=t.search();e.selectedBlogPost&&(n.code=e.selectedBlogPost.code,console.log("location.search: ",n),t.search(n))},e.updateBlogPosts=function(){a.query({}).$promise.then(function(n){e.blogPosts=[],n.forEach(function(n){e.blogPosts.push(n)}),e.inputReleaseCode?(e.blogPosts.forEach(function(n,o){n.code===e.inputReleaseCode&&(e.selectedBlogPostId=o)}),e.inputReleaseCode=void 0,e.selectedBlogPost=e.blogPosts[e.selectedBlogPostId],0===e.selectedBlogPostId&&e.setProperSearchParam()):(e.selectedBlogPost=e.blogPosts[e.selectedBlogPostId],e.setProperSearchParam()),e.getTracks(e.selectedBlogPost.soundcloudUserId,function(){e.adaptInternalsOnLoad(),s.stop("root-spinner")})})},e.selectBlogPost=function(){e.blogPosts.length>0&&(s.spin("root-spinner"),e.selectedBlogPost=e.blogPosts[e.selectedBlogPostId],e.setProperSearchParam(),e.getTracks(e.selectedBlogPost.soundcloudUserId,function(){s.stop("root-spinner")}))},e.$watch("selectedBlogPostId",function(n){console.log("selectedBlogPostId new val: ",n),e.selectedBlogPost&&!e.inputReleaseCode&&e.selectBlogPost()}),e.nextBlogPost=function(){e.selectedBlogPostId>0&&e.selectedBlogPostId--,console.log("this is last blog post")},e.previousBlogPost=function(){e.selectedBlogPostId<e.blogPosts.length-1&&e.selectedBlogPostId++,console.log("this is first blog post")},e.$on("$viewContentLoaded",function(){console.log("blog view controller loaded");var n=t.search();n.code&&(console.log("location.search: ",n),e.inputReleaseCode=n.code),e.updateBlogPosts()}),e.$on("$destroy",function(){console.log("blog view controller destroyed"),s.spin("root-spinner")}),window.addEventListener("resize",function(){e.$apply(function(){o.reload()})},!0)}]),dnbhubControllers.controller("contactCtrl",["$scope","$timeout","usSpinnerService","submitFormService",function(e,n,o,t){"use strict";e.email="",e.name="",e.header="",e.message="",e.buttonText={reset:"Reset all fields",submit:"Send message"},e.params="",e.sendMailResponse={error:"",success:""},e.hideInstructions=!1,e.switchInstructionsVisibility=function(){e.hideInstructions=!0},e.instructions={intro:"Use this contact form for any enquiries correlating with Drum'n'Bass Hub activities, for example:",list:"<li>make an info support request - have a blog post for your upcoming release;</li><li>make a collaboration or hire request - work with us in the context of audio production from scratch or remixing;</li><li>make a licencing request - use music, published by Dnbhub, for your needs;</li><li>make any other request - did we miss something?</li>"},e.resetForm=function(){e.email="",e.name="",e.header="",e.message=""},e.submitForm=function(){e.params="name="+e.name+"&email="+e.email+"&header="+e.header+"&message="+e.message,t.query(e.params).$promise.then(function(o){console.log(o),o.error&&(e.sendMailResponse.error=o.error),o.success&&(e.sendMailResponse.success=o.success,e.resetForm()),n(function(){e.sendMailResponse.error="",e.sendMailResponse.success=""},5e3)})},e.$on("$viewContentLoaded",function(){console.log("contact view controller loaded"),o.stop("root-spinner")}),e.$on("$destroy",function(){console.log("contact view controller destroyed"),o.spin("root-spinner")})}]),dnbhubControllers.controller("aboutCtrl",["$scope","$route","usSpinnerService","dnbhubDetailsService",function(e,n,o,t){"use strict";e.adaptInternalsOnLoad=function(){var e=$("nav").height(),n=$("html").height(),o=$("#data-container .heading").height()+$("#data-container .heading").css("margin-top")+$("#data-container .heading").css("margin-bottom"),t=n-e-o;$(".text").height(t),$("#data-container .widget").height(t),$("#powered_by").height(n-190)},e.dnbhubDetails={},e.updateDnbhubDetails=function(){t.query({}).$promise.then(function(n){e.dnbhubDetails={};var t=Object.keys(n);console.log(t,n),t.forEach(function(o){e.dnbhubDetails[o]=n[o]}),console.log(e.dnbhubDetails),e.adaptInternalsOnLoad(),o.stop("root-spinner")})},e.$on("$viewContentLoaded",function(){console.log("about view controller loaded"),e.updateDnbhubDetails()}),e.$on("$destroy",function(){console.log("about view controller destroyed"),o.spin("root-spinner")}),window.addEventListener("resize",function(){e.$apply(function(){n.reload()})},!0)}]);var dnbhubDirectives=angular.module("dnbhubDirectives",[]);dnbhubDirectives.directive("setElementDimensionsOnload",["$window",function(e){"use strict";return{restrict:"A",link:function(n,o){o.on("load",function(){var n=e.innerHeight-75,t=350;o.css("width",t+"px"),o.css("height",n+"px"),console.log("element",o);var s=angular.element(o.offsetParent()),a=s[0].clientWidth,r=(a-t)/2;console.log("resize params",s,a,r),o.css({marginLeft:r+"px",marginRight:r+"px"})})}}}]);var dnbhubServices=angular.module("dnbhubServices",["ngResource"]);dnbhubServices.factory("freedownloadsService",["$resource","$location",function(e,n){"use strict";var o=setBaseUrl(n.$$host,n.$$absUrl);return console.log("abs base url "+o),e(o+"/data/freedownloads-data.json",{},{query:{method:"GET",params:{},isArray:!0,interceptor:{response:function(e){return e.resource.$httpHeaders=e.headers,e.resource}}}})}]),dnbhubServices.factory("blogPostsService",["$resource","$location",function(e,n){"use strict";var o=setBaseUrl(n.$$host,n.$$absUrl);return console.log("abs base url "+o),e(o+"/data/blog-posts.json",{},{query:{method:"GET",params:{},isArray:!0,interceptor:{response:function(e){return e.resource.$httpHeaders=e.headers,e.resource}}}})}]),dnbhubServices.factory("dnbhubDetailsService",["$resource","$location",function(e,n){"use strict";var o=setBaseUrl(n.$$host,n.$$absUrl);return console.log("abs base url "+o),e(o+"/data/dnbhub-details.json",{},{query:{method:"GET",params:{},isArray:!1,interceptor:{response:function(e){return e.resource.$httpHeaders=e.headers,e.resource}}}})}]),dnbhubServices.factory("submitFormService",["$resource","$location",function(e,n){"use strict";var o=setBaseUrl(n.$$host,n.$$absUrl);return console.log("abs base url "+o),e(o+"/php/contact.php",{},{query:{method:"POST",params:{},headers:{"Content-type":"application/x-www-form-urlencoded"},isArray:!1,interceptor:{response:function(e){return e.resource.$httpHeaders=e.headers,e.resource}}}})}]);